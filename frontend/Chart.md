# Chart 관리 페이지 초안

## 개요
관리자 페이지에서 Intro.jsx 페이지에 표시되는 차트와 뉴스 레이아웃을 관리할 수 있는 기능입니다.
차트 선택은 관리자 페이지에서만 가능합니다.

## 전체 페이지 컨셉

### Chart 스타일셋 구조
- **차트셋**: Intro.jsx 페이지의 카드 레이아웃으로 구현된 차트와 뉴스를 묶어서 관리
- **차트셋 폴더 구조**:
  ```
  /frontend/src/chart/
    └── chartSet_1/
        ├── Chart.jsx          (차트 컴포넌트)
        ├── News.jsx           (뉴스 컴포넌트)
        └── chart.css          (차트 스타일)
    └── chartSet_2/
        ├── Chart.jsx
        ├── News.jsx
        └── chart.css
  ```

### 차트셋 구성 요소
1. **Chart.jsx**: 차트 컴포넌트 (카드 레이아웃)
   - 국내 금 시세 차트
   - 국제 금 시세 차트
   - TradingView 위젯 통합
   - Recharts 또는 ApexCharts 사용
2. **News.jsx**: 뉴스 컴포넌트 (카드 레이아웃)
   - 네이버 경제 뉴스 표시
   - 뉴스 리스트 레이아웃
3. **chart.css**: 차트 및 뉴스 스타일

### 현재 구현 상태
- **chartSet_1**: Intro.jsx에 현재 구현된 카드 레이아웃 차트와 뉴스
  - TradingView 위젯 사용 (국제 금 시세, 백금, 비트코인)
  - Recharts 사용 (국내 금 시세)
  - 네이버 경제 뉴스 API 연동

## 주요 기능

### 1. 차트셋 관리
- 차트셋 목록 조회
- 차트셋 생성/수정/삭제
- **chartSet_1을 기본 차트셋으로 저장** (Intro.jsx에서 코드 추출)

### 2. 차트셋 선택 및 적용
- **관리자 페이지에서 차트셋 선택**
- 선택한 차트셋 적용 기능
- **적용 시 Intro.jsx 페이지에 자동 반영**

### 3. 차트 컴포넌트 편집
- 차트 컴포넌트 코드 편집
- 뉴스 컴포넌트 코드 편집
- CSS 스타일 편집

## 백엔드 API 설계 (간단)

### Chart Controller
```
GET    /chart/list              - 차트셋 목록 조회
GET    /chart/get?name={name}   - 차트셋 상세 조회
POST   /chart/save              - 차트셋 저장/수정
POST   /chart/delete            - 차트셋 삭제
POST   /chart/apply             - 차트셋 적용 (현재 적용된 차트셋 이름 저장)
GET    /chart/current           - 현재 적용된 차트셋 이름 조회
POST   /chart/export            - chartSet_1 내보내기 (Intro.jsx에서 코드 추출)
```

## 프론트엔드 페이지 구조

### 1. Chart 차트셋 관리 페이지 (ChartSetManage.jsx)
- 차트셋 목록 (카드 형태)
- 차트셋 선택 및 적용 버튼
- 차트셋 생성/수정/삭제
- **chartSet_1 내보내기 기능** (Intro.jsx에서 현재 구현된 코드 추출)

### 2. Chart 차트셋 편집 페이지 (ChartSetEditor.jsx)
- 차트셋 이름 입력
- 컴포넌트별 편집 탭
  - Chart.jsx 편집
  - News.jsx 편집
  - chart.css 편집
- 각 탭별 코드 편집기
- 저장/취소 버튼

### 3. Intro.jsx 수정
- 현재 하드코딩된 차트/뉴스 코드를 차트셋으로 대체
- 적용된 차트셋의 컴포넌트를 동적으로 import하여 사용
- 차트셋이 없을 경우 기본 chartSet_1 사용

## chartSet_1 저장 프로세스

### 1. Intro.jsx에서 차트 코드 추출
- 현재 Intro.jsx에 구현된 차트 컴포넌트 코드 추출
- 뉴스 컴포넌트 코드 추출
- 관련 CSS 코드 추출

### 2. chartSet_1 생성
- `/frontend/src/chart/chartSet_1/` 폴더 생성
- Chart.jsx 파일 생성 (차트 컴포넌트)
- News.jsx 파일 생성 (뉴스 컴포넌트)
- chart.css 파일 생성 (스타일)

### 3. Intro.jsx 수정
- 하드코딩된 차트/뉴스 코드 제거
- 차트셋 동적 import 로직 추가
```javascript
// 현재 적용된 차트셋 이름 조회
const currentChartSet = await fetch('/chart/current');
// 차트셋 컴포넌트 동적 import
const Chart = await import(`./chart/${currentChartSet}/Chart`);
const News = await import(`./chart/${currentChartSet}/News`);
```

## 적용 프로세스

### 1. 관리자 페이지에서 차트셋 선택
- 차트셋 목록에서 선택
- 적용 버튼 클릭

### 2. 차트셋 적용
- 선택한 차트셋 이름을 백엔드에 저장 (간단한 설정 파일 또는 메모리)
- 예: `currentChartSet = "chartSet_1"`

### 3. Intro.jsx에서 차트셋 로드
- 페이지 로드 시 현재 적용된 차트셋 이름 조회
- 해당 차트셋의 컴포넌트를 동적으로 import
- React 컴포넌트로 렌더링

## UI 레이아웃 예시

### Chart 차트셋 관리 페이지
```
┌─────────────────────────────────────────────────────────────────┐
│  Chart 차트셋 관리                                               │
├─────────────────────────────────────────────────────────────────┤
│  [+ 새 차트셋 생성] [chartSet_1 내보내기]                        │
├─────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │ chartSet_1    │  │ chartSet_2  │  │ chartSet_3   │         │
│  │ 기본차트       │  │ 다크테마차트 │  │ 커스텀차트   │         │
│  │ [선택] [적용] │  │ [선택] [적용]│  │ [선택] [적용]│         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

### Chart 차트셋 편집 페이지
```
┌─────────────────────────────────────────────────────────────────┐
│  Chart 차트셋 편집: chartSet_1                                   │
├─────────────────────────────────────────────────────────────────┤
│  차트셋 이름: [chartSet_1                    ]                   │
├─────────────────────────────────────────────────────────────────┤
│  [Chart.jsx] [News.jsx] [chart.css]                            │
├─────────────────────────────────────────────────────────────────┤
│  [코드 편집기 영역]                                              │
│  import { ... } from 'react';                                   │
│  function Chart() { ... }                                       │
│  ...                                                             │
├─────────────────────────────────────────────────────────────────┤
│  [저장] [취소]                                                   │
└─────────────────────────────────────────────────────────────────┘
```

## 차트 라이브러리

### 현재 사용 중
- **Recharts**: 국내 금 시세 차트
- **TradingView Widget**: 국제 금 시세, 백금, 비트코인

### 지원 가능
- **ApexCharts**: react-apexcharts 모듈 사용
- **Chart.js**: react-chartjs-2 모듈 사용

## API 데이터 소스

### 현재 사용 중
- **Alpha Vantage API**: 금 시세 데이터
- **네이버 경제 뉴스 API**: 뉴스 데이터
- **TradingView Widget**: 실시간 시세 그래프

### 추가 가능
- **KRX 금시장 API**: 한국거래소 금상품 시세 정보

## 구현 우선순위

### Phase 1 (기본 기능)
1. chartSet_1 저장 기능 (Intro.jsx에서 코드 추출 및 파일 생성)
2. 차트셋 목록 조회
3. 차트셋 선택 및 적용
4. Intro.jsx에서 차트셋 동적 로드

### Phase 2 (편집 기능)
1. 차트셋 생성/수정/삭제
2. 컴포넌트별 코드 편집기

## 체크 사항

### ✅ 차트셋 관리
- [x] 차트셋 생성/수정/삭제
- [x] 차트셋별 컴포넌트 관리 (Chart, News, CSS)
- [x] 차트셋 선택 및 적용

### ✅ chartSet_1 저장
- [x] Intro.jsx에서 현재 구현된 차트 코드 추출
- [x] Intro.jsx에서 현재 구현된 뉴스 코드 추출
- [x] chartSet_1 폴더에 파일로 저장
- [x] Intro.jsx를 차트셋 기반으로 수정

### ✅ Intro.jsx 통합
- [x] 하드코딩된 차트/뉴스 코드 제거
- [x] 차트셋 동적 import 로직 추가
- [x] 적용된 차트셋의 컴포넌트 렌더링

## 참고사항
- **파일 기반 저장**: DB 대신 파일 시스템에 차트셋 저장
- **동적 import**: React의 동적 import를 사용하여 차트셋 컴포넌트 로드
- 프론트엔드에서 차트셋 변경 시 Intro.jsx에 즉시 반영
- API 키는 보안을 위해 환경 변수로 관리 권장
- 보안을 위해 관리자 권한 체크 필수
